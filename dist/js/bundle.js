!function e(t,i,n){function r(a,s){if(!i[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var d=new Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d}var c=i[a]={exports:{}};t[a][0].call(c.exports,function(e){var i=t[a][1][e];return r(i?i:e)},c,c.exports,e,t,i,n)}return i[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(e,t,i){t.exports={displayErrorToUser:function(e,t,i){var n=document.createElement("p");n.setAttribute("class","errorMessage"),n.innerHTML=t,e.appendChild(n),setTimeout(function(){for(;e.firstChild;)e.removeChild(e.firstChild)},i)}}},{}],2:[function(e,t,i){"use strict";var n,r,o,a,s,l,d=e("./helpers"),c=document.getElementById("error");$(document).ready(function(){$(".ui .item").on("click",function(){$(".ui .item").removeClass("active"),$(this).addClass("active")})});var m=Backbone.Model.extend({defaults:{added:!1}}),f=Backbone.Collection.extend({model:m}),h=Backbone.Firebase.Collection.extend({model:m,url:"https://healthtrackingbbone.firebaseio.com"}),u=Backbone.View.extend({el:$("#main"),initialize:function(){this.render()},events:{"submit form":"fetchData"},fetchData:function(e){e.preventDefault();var t=this,i=$(e.currentTarget).find("input[type=text]").val().trim(),r=i.replace(/ /g,"%20"),o="https://api.nutritionix.com/v1_1/search/"+r+"?results=0%3A20&cal_min=0&cal_max=50000&fields=item_name%2Citem_id%2Cbrand_name%2Cnf_calories%2Cnf_total_fat&appId=b301fa4c&appKey=dc12f0d56ee2507d0393345103cb64fa";0===i.length?d.displayErrorToUser(c,"Type a food keyword please ...",2e3):$.ajax({type:"GET",url:o,dataType:"JSON",success:function(e){if(n.reset(),e&&e.hits.length>0)for(var i,r,o,a,s,l,f,h,u=0;e.hits.length>u;u++)i=e.hits[u].fields.item_id,r=e.hits[u].fields.brand_name,o=e.hits[u].fields.item_name,a=e.hits[u].fields.nf_calories,s=e.hits[u].fields.nf_serving_size_qty,l=e.hits[u].fields.nf_serving_size_unit,f=e.hits[u].fields.nf_total_fat||"N/A",h=new m({id:i,brandName:r,itemName:o,calories:a,servingSize:s,servingUnit:l,totalFat:f}),n.add(h);else d.displayErrorToUser(c,"No Result with the keyword...",2e3);t.render()},error:function(){d.displayErrorToUser(c,"Error on fetching data...",2e3)}})},render:function(){var e=_.template($("#search-page-template").html());this.$el.html(e)}}),p=Backbone.View.extend({el:$("#resultList"),initialize:function(){this.listenTo(this.collection,"add remove",this.render)},render:function(){this.$el.empty();var e,t=this;_(this.collection.models).each(function(i){e=new v({model:i}),t.$el.append(e.render())},this)}}),v=Backbone.View.extend({tagName:"div",className:"item",template:_.template($("#list-item-template").html()),events:{"click .addButton":"addToMyFoods"},render:function(){return this.$el.html(this.template({item:this.model}))},addToMyFoods:function(e){e.preventDefault(),this.model.set("added",!0),r.add(this.model),n.remove(this.model)}}),y=Backbone.View.extend({el:"#main",initialize:function(){this.render()},render:function(){var e=_.template($("#myfoods-header-template").html());this.$el.html(e)}}),w=Backbone.View.extend({el:"#resultList",initialize:function(){this.listenTo(this.collection,"sync remove",this.render)},render:function(){this.$el.empty();var e,t=this,i=0;"#/myfoods"===window.location.hash&&(_(t.collection.models).each(function(n){e=new b({collection:t.collection,model:n}),t.$el.append(e.render()),i+=n.get("calories")},this),$("#totalCalories").text(Math.round(100*i)/100))}}),b=Backbone.View.extend({tagName:"div",className:"item",template:_.template($("#list-item-template").html()),events:{"click .removeButton":"removeFromMyFoods"},render:function(){return this.$el.html(this.template({item:this.model}))},removeFromMyFoods:function(e){e.preventDefault(),r.remove(this.model)}});n=new f,r=new h,o=new u,a=new p({collection:n}),s=new y,l=new w({collection:r});var x=Backbone.Router.extend({routes:{"":"search",myfoods:"myfoods"},search:function(){o.render(),n.reset(),a.render()},myfoods:function(){s.render(),l.render()}});new x;Backbone.history.start()},{"./helpers":1}]},{},[2]);